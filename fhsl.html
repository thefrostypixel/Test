<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Frosty HSL</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="initial-scale=1">
        <meta charset="UTF-8">
        <link rel="icon" href="logo.svg">
    </head>
    <body>
        <style>
            body {
                background: #000;
                margin: 0;
            }
            div {
                width: 100vw;
                height: 100px;
            }
        </style>
        <div id="hue"></div><div id="grayscale"></div>
        <br><br><br><br><br><br>
        <div id="oHue"></div><div id="oGrayscale"></div>
        <br><br><br><br><br><br>
        <div id="nHue"></div><div id="nGrayscale"></div>
        <script>
            let rgbToGray = (rgb) => Math.round(299e4 * rgb.r + 587e4 * rgb.g + 114e4 * rgb.b) * 1e-7;
            let normalizeRgb = (rgb) => {
                let grayStr = rgbToGray(rgb) * .1 + .9;
                return {
                    r: Math.round((rgb.r * grayStr + (1 - grayStr) * 10) * 594035879.767138 - 67720090.19147857) * 1e-9,
                    g: Math.round((rgb.g * grayStr + (1 - grayStr) * 10) * 594035879.767138 - 67720090.19147857) * 1e-9,
                    b: Math.round((rgb.b * grayStr + (1 - grayStr) * 10) * 594035879.767138 - 67720090.19147857) * 1e-9
                };
            }
            let hueToRgb = (h) => {
                h = h % 360 / 360;
                while (h < 0) h++;
                let huePrime = h * 6;
                let chroma = 1;
                let x = chroma * (1 - Math.abs(huePrime % 2 - 1));
                let r1, g1, b1;
                if (huePrime >= 0 && huePrime < 1) {
                    r1 = chroma;
                    g1 = x;
                    b1 = 0;
                } else if (huePrime >= 1 && huePrime < 2) {
                    r1 = x;
                    g1 = chroma;
                    b1 = 0;
                } else if (huePrime >= 2 && huePrime < 3) {
                    r1 = 0;
                    g1 = chroma;
                    b1 = x;
                } else if (huePrime >= 3 && huePrime < 4) {
                    r1 = 0;
                    g1 = x;
                    b1 = chroma;
                } else if (huePrime >= 4 && huePrime < 5) {
                    r1 = x;
                    g1 = 0;
                    b1 = chroma;
                } else if (huePrime >= 5 && huePrime < 6) {
                    r1 = chroma;
                    g1 = 0;
                    b1 = x;
                } else {
                    r1 = 0;
                    g1 = 0;
                    b1 = 0;
                }
                let m = 1 - chroma;
                return {
                    r: r1 + m,
                    g: g1 + m,
                    b: b1 + m
                };
            };
            let rgbToStr = (r, g, b) => "rgb(" + Math.min(r, 1) * 255 + "," + Math.min(g, 1) * 255 + "," + Math.min(b, 1) * 255 + ")";

            let nHue = ""; let nGrayscale = "";

            for (let i = 0; i <= 360; i += .01) {
                let p = Math.round(i / 360 * 1e4) * 1e-2;

                let nRgb = normalizeRgb(hueToRgb(i));
                let nG = rgbToGray(Math.min(nRgb.r, 1), Math.min(nRgb.g, 1), Math.min(nRgb.b, 1)) * 255;

                nHue += rgbToStr(nRgb.r, nRgb.g, nRgb.b) + " " + p + "%,";
                nGrayscale += "rgb(" + nG + "," + nG + "," + nG + ") " + p + "%,";

                min = Math.min(min, nRgb.r, nRgb.g, nRgb.b);
                max = Math.max(max, nRgb.r, nRgb.g, nRgb.b);
            }
            document.getElementById("nHue").style.background = "linear-gradient(to right, " + nHue.slice(0, -1) + ")";
            document.getElementById("nGrayscale").style.background = "linear-gradient(to right, " + nGrayscale.slice(0, -1) + ")";
        </script>
    </body>
</html>
