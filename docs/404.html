<!DOCTYPE HTML>
<html>
  <head>
    <title>
      WB 404
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="icon.svg">
    <script src="script.js">
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        var base = "https://thefrostypixel.github.io/Test";
        if (document.location.href.startsWith("https://")) {
          base = "https://thefrostypixel.github.io/Test";
        }
        var url = document.location.href.replace(base, "");
        if (url.startsWith("/en")) {
          load404Page(base + "/en");
        } else if (url.startsWith("/de")) {
          load404Page(base + "/de");
        } else {
          var lang = (navigator.language || navigator.userLanguage);
          if (lang != "de") {
            lang = "en";
          }
          document.location.href = base + "/" + lang + url;
        }
      }, false);
      
      function load404Page(lang) {
        var request = new XMLHttpRequest();
        request.open("GET", lang + "/404.html", true);
        request.onreadystatechange = function() {
          if (this.readyState !==4) {
            return;
          };
          if (this.status!==200) {
            return
          };
          document.getElementById("body").innerHTML = this.responseText;
        };
        request.send();
      }
    </script>
  </head>
  <body id="body">
  </body>
</html>
